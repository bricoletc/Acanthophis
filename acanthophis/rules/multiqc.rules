rule multiqc_samstats:
    input:
        stats=lambda wc: expand("alignments/bamstats/sample/{{aligner}}~{{ref}}~{sample}.samtools.stats", sample=config["SAMPLESETS"][wc.sampleset]),
    output:
        html="stats/multiqc/bamstats/{aligner}~{ref}~{sampleset}_multiqc_report.html",
    log:
        log="stats/multiqc/bamstats/{aligner}~{ref}~{sampleset}_multiqc_report.log",
    resources: **acanthophis.rule_resources(config, "multiqc_bamstats", time_min=30, mem_gb=2)
    conda: "envs/qcstats.yml"
    shell:
        "multiqc"
        "   --no-megaqc-upload"
        "   --flat"
        "   --no-data-dir"
        "   --comment 'Report for sample set {wildcards.sampleset}'"
        "   --filename {output.html}"
        "   {input}"
        " >{log} 2>&1"

